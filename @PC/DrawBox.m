function h = DrawBox(ex, p, imtype, varargin)%h = DrawBox(ex, p, imtype, varargin) Draw box on image at ex,p%imtype is passed on to the callback PC.HitImage,     lx = -0.5;    bw = 0.5;    box = 0;    h = [];    j = 1;    passon = {};    while j <= length(varargin)        if strcmp(varargin{j},'box2')            lx = 0;        elseif strcmp(varargin{j},'box1')            box = 1;        elseif sum(myhandle(varargin{j}))             if strcmp(get(varargin{j},'type'),'line')                h = varargin{j};            else                passon = {passon{:} varargin{j}};                         end        else            passon = {passon{:} varargin{j}};        end        j = j+1;    end        cl = round(rem(p,1).*10);    p = floor(p);    if cl == 2        lx = 0;    end        if length(ex) > 1 || length(p) > 1        square = [min(p)+lx max(p)+0.5 max(p)+0.5 min(p)+lx min(p)+lx; min(ex)-0.5 min(ex)-0.5 max(ex)+0.5 max(ex)+0.5 min(ex)-0.5];    else        if box == 1            square = [lx 0 0 lx lx; -bw -bw bw bw -bw];        else            square = [lx bw bw lx lx; -bw -bw bw bw -bw];        end        square = [square(1,:)+p; square(2,:)+ex];    end    if ishandle(h)        set(h, 'xdata', square(1,:), 'ydata',square(2,:));    elseif iscell(imtype)        h = plot(square(1,:),square(2,:),'k-','buttondownfcn',imtype,'linewidth',2);    else        h = plot(square(1,:),square(2,:),'k-','buttondownfcn',{@PC.HitImage, imtype},'linewidth',2);    end    if length(passon)        set(h,passon{:});    end                        